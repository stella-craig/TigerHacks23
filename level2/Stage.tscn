[gd_scene load_steps=27 format=2]

[ext_resource path="res://Tileset.tres" type="TileSet" id=1]
[ext_resource path="res://coin/Coin.tscn" type="PackedScene" id=2]
[ext_resource path="res://platform/MovingPlatform.tscn" type="PackedScene" id=3]
[ext_resource path="res://background/Seesaw.tscn" type="PackedScene" id=4]
[ext_resource path="res://platform/OneWayPlatform.tscn" type="PackedScene" id=5]
[ext_resource path="res://player/Player.tscn" type="PackedScene" id=6]
[ext_resource path="res://enemy/Enemy.tscn" type="PackedScene" id=7]
[ext_resource path="res://background/ParallaxBg.tscn" type="PackedScene" id=8]
[ext_resource path="res://audio/music.ogg" type="AudioStream" id=9]
[ext_resource path="res://Grayscale.gd" type="Script" id=10]
[ext_resource path="res://Collectibles/Ruby Slippers.tscn" type="PackedScene" id=11]
[ext_resource path="res://assets/Sign.tscn" type="PackedScene" id=12]

[sub_resource type="PhysicsMaterial" id=1]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=2]

[sub_resource type="PhysicsMaterial" id=3]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=4]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=5]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=6]

[sub_resource type="PhysicsMaterial" id=7]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=8]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=9]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=10]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=11]
friction = 0.0

[sub_resource type="PhysicsMaterial" id=12]
friction = 0.0

[sub_resource type="Shader" id=13]
code = "shader_type canvas_item;

uniform float time_passed; // This should be set from the outside, e.g., using Godot's shader parameters

const float buffer_time = 5.0; // Time before the fade starts in seconds
const float fade_duration = 15.0; // Duration of the fade in seconds

void fragment() {
    COLOR = texture(SCREEN_TEXTURE, SCREEN_UV);
    // Convert to grayscale
    float gray = (COLOR.r + COLOR.g + COLOR.b) / 3.0;
    COLOR.rgb = vec3(gray);

    // Calculate the alpha based on time passed
    if (time_passed < buffer_time) {
        // No fading before the buffer time
        COLOR.a = 1.0;
    } else {
        // Start fading out after the buffer time
        float fade_amount = (time_passed - buffer_time) / fade_duration;
        COLOR.a *= 1.0 - clamp(fade_amount, 0.0, 1.0);
    }
}
"

[sub_resource type="ShaderMaterial" id=14]
shader = SubResource( 13 )
shader_param/time_passed = null

[node name="Stage" type="Node2D"]

[node name="TileMap" type="TileMap" parent="."]
position = Vector2( 1, 1331 )
tile_set = ExtResource( 1 )
cell_size = Vector2( 32, 32 )
cell_quadrant_size = 4
format = 1
tile_data = PoolIntArray( -1048544, 16, 0, -1048543, 16, 0, -1048542, 16, 0, -917475, 16, 0, -917474, 16, 0, -917468, 16, 0, -917467, 16, 0, -786405, 16, 0, -786404, 16, 0, -786394, 16, 0, -786393, 16, 0, -655331, 16, 0, -655330, 16, 0, -655324, 16, 0, -655323, 16, 0, -524257, 16, 0, -524256, 16, 0, -524254, 16, 0, -524253, 16, 0, -393187, 16, 0, -393186, 16, 0, -262113, 16, 0, -262112, 16, 0, -196580, 16, 0, -196579, 16, 0, -196574, 16, 0, -196573, 16, 0, -196571, 16, 0, -196570, 16, 0, -196567, 16, 0, -196566, 16, 0, -131047, 16, 0, -131046, 16, 0, -131028, 16, 0, -131027, 16, 0, -65505, 16, 0, -65504, 16, 0, -65489, 16, 0, -65488, 16, 0, 27, 16, 0, 28, 16, 0, 65570, 16, 0, 65571, 16, 0, 65573, 16, 0, 65574, 16, 0, 131097, 16, 0, 131098, 16, 0, 131112, 16, 0, 131113, 16, 0, 262171, 16, 0, 262172, 16, 0, 393241, 16, 0, 393242, 16, 0, 524311, 16, 0, 524312, 16, 0, 655386, 16, 0, 655387, 16, 0, 655388, 16, 0, 786455, 16, 0, 786456, 16, 0, 786462, 16, 0, 786463, 16, 0, 917524, 16, 0, 917525, 16, 0, 917532, 16, 0, 917533, 16, 0, 1048593, 16, 0, 1048594, 16, 0, 1048602, 16, 0, 1048603, 16, 0, 1114112, 16, 0, 1114113, 16, 0, 1114114, 16, 0, 1114115, 16, 0, 1114116, 16, 0, 1114117, 16, 0, 1114118, 16, 0, 1114119, 16, 0, 1114120, 16, 0, 1114121, 16, 0, 1114122, 16, 0, 1114123, 16, 0, 1114124, 16, 0, 1114125, 16, 0, 1114126, 12, 0, 1179648, 20, 0, 1179649, 20, 0, 1179650, 20, 0, 1179651, 20, 0, 1179652, 20, 0, 1179653, 20, 0, 1179654, 20, 0, 1179655, 20, 0, 1179656, 20, 0, 1179657, 20, 0, 1179658, 20, 0, 1179659, 20, 0, 1179660, 20, 0, 1179661, 20, 0, 1179663, 16, 0, 1179672, 16, 0, 1179673, 16, 0, 1179674, 16, 0 )

[node name="Coins" type="Node2D" parent="."]
position = Vector2( 119, -86 )

[node name="Coin" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 298, 379 )

[node name="Coin2" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 288, 350 )

[node name="Coin3" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 311, 353 )

[node name="Coin4" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 249, 309 )

[node name="Coin5" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 214, 325 )

[node name="Coin6" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 289, 330 )

[node name="Coin7" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 399, 324 )

[node name="Coin8" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 342, 345 )

[node name="Coin11" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 700, 1984 )

[node name="Coin12" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 459, 1921 )

[node name="Coin13" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1040, 336 )

[node name="Coin14" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1072, 336 )

[node name="Coin15" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 874, 1792 )

[node name="Coin16" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 992, 1147 )

[node name="Coin17" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 773, 1016 )

[node name="Coin18" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 713, 1462 )

[node name="Coin19" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 649, 1663 )

[node name="Coin20" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1000, 1442 )

[node name="Coin21" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 49.4434, 244.258 )

[node name="Coin22" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 44.7994, 240.609 )

[node name="Coin23" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 54.0875, 240.609 )

[node name="Coin24" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 58.068, 234.969 )

[node name="Coin25" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 58.7315, 228.999 )

[node name="Coin26" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 53.092, 224.686 )

[node name="Coin27" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 49.1117, 229.331 )

[node name="Coin28" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 44.136, 224.355 )

[node name="Coin29" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 39.8238, 228.667 )

[node name="Coin30" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 41.4823, 234.306 )

[node name="Coin31" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 840, 243 )

[node name="Coin32" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 872, 243 )

[node name="Coin33" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 904, 243 )

[node name="Coin34" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 904, 211 )

[node name="Coin35" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 872, 211 )

[node name="Coin36" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 840, 211 )

[node name="Coin37" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1247.67, 312.885 )

[node name="Coin38" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1279.67, 312.885 )

[node name="Coin39" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1311.67, 312.885 )

[node name="Coin40" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1311.67, 280.885 )

[node name="Coin41" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1279.67, 280.885 )

[node name="Coin42" parent="Coins" instance=ExtResource( 2 )]
position = Vector2( 1247.67, 280.885 )

[node name="Props" type="Node2D" parent="."]
position = Vector2( 72, -36 )

[node name="MovingPlatform" parent="Props" instance=ExtResource( 3 )]
position = Vector2( 137, 203 )
motion = Vector2( 0, 70 )
cycle = 5.0

[node name="MovingPlatform 2" parent="Props" instance=ExtResource( 3 )]
position = Vector2( 312.412, 272.772 )
motion = Vector2( 150, 0 )
cycle = 10.0

[node name="MovingPlatform 3" parent="Props" instance=ExtResource( 3 )]
position = Vector2( 337, 420 )
motion = Vector2( 225, 0 )
cycle = 10.0

[node name="Seesaw" parent="Props" instance=ExtResource( 4 )]
position = Vector2( 959, 361 )

[node name="OneWayPlatform" parent="Props" instance=ExtResource( 5 )]
position = Vector2( 423, 351 )

[node name="Sign" parent="Props" instance=ExtResource( 12 )]
position = Vector2( 305, 1905 )

[node name="Player" parent="." instance=ExtResource( 6 )]
position = Vector2( 204, 1848 )
physics_material_override = SubResource( 1 )

[node name="Enemies" type="Node2D" parent="."]
position = Vector2( -759, 209 )

[node name="Enemy1" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 223, 354 )
physics_material_override = SubResource( 2 )

[node name="Enemy2" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 130, 344 )
physics_material_override = SubResource( 3 )

[node name="Enemy3" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 351, 316 )
physics_material_override = SubResource( 4 )

[node name="Enemy4" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 433, 303 )
physics_material_override = SubResource( 5 )

[node name="Enemy5" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 273, 170 )
physics_material_override = SubResource( 6 )

[node name="Enemy6" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 60.1399, 373.098 )
physics_material_override = SubResource( 7 )

[node name="Enemy7" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 162, 175 )
physics_material_override = SubResource( 8 )

[node name="Enemy8" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 185, 250 )
physics_material_override = SubResource( 9 )

[node name="Enemy9" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 481.55, 174 )
physics_material_override = SubResource( 10 )

[node name="Enemy10" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( 878, 1584 )
physics_material_override = SubResource( 11 )

[node name="Enemy11" parent="Enemies" instance=ExtResource( 7 )]
position = Vector2( -30, 311.125 )
physics_material_override = SubResource( 12 )

[node name="ParallaxBg" parent="." instance=ExtResource( 8 )]

[node name="Label" type="Label" parent="."]
margin_left = -412.0
margin_top = -213.0
margin_right = -66.0
margin_bottom = -21.0
size_flags_horizontal = 2
size_flags_vertical = 0
text = "This is a simple demo on how to make a platformer game with Godot.\"This version uses physics and the 2D physics engine for motion and collision.\"\"The demo also shows the benefits of using the scene system, where coins,\"enemies and the player are edited separatedly and instanced in the stage.\"\"To edit the base tiles for the  tileset, open the tileset_edit.tscn file and follow \"instructions.\""
autowrap = true

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 9 )
autoplay = true

[node name="Collectibles" type="Node" parent="."]

[node name="Ruby Slippers" parent="Collectibles" instance=ExtResource( 11 )]
position = Vector2( 1537, 1289 )

[node name="Grayscale" type="ColorRect" parent="."]
material = SubResource( 14 )
margin_left = -113152.0
margin_top = -26718.0
margin_right = 131385.0
margin_bottom = 39160.0
script = ExtResource( 10 )
